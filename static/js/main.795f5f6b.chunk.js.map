{"version":3,"sources":["components/UI/MyModal/MyModal.module.css","components/UI/input/Myinput.module.css","components/UI/button/Mybutton.module.css","components/UI/Loader/Loader.module.css","API/PostService.js","components/UI/input/Myinput.jsx","components/UI/select/MySelect.jsx","components/PostFilter.jsx","components/UI/button/Mybutton.jsx","components/Postform.jsx","components/Postitem.jsx","components/Postlist.jsx","components/UI/Loader/Loader.jsx","components/UI/MyModal/MyModal.jsx","hooks/useFetching.js","hooks/usePosts.js","utils/pages.js","App.js","index.js"],"names":["module","exports","PostService","limit","page","axios","get","params","_limit","_page","response","Myinput","props","className","classes","myInput","MySelect","options","defaultValue","value","onChange","evt","target","disabled","map","option","name","PostFilter","filter","setFilter","query","e","placeholder","sort","selectedSort","Mybutton","children","style","onClick","myBtn","Postform","create","useState","title","body","post","setPost","onSubmit","preventDefault","newPost","id","Date","now","tittle","type","Postitem","remove","Postlist","posts","length","textAlign","TransitionGroup","index","CSSTransition","timeout","classNames","number","Loader","cl","loader","MyModal","visible","setVisible","rootClasses","myModal","push","active","join","myModalContent","stopPropagation","usePosts","sortedPosts","useMemo","console","log","a","b","localeCompare","useSortedPosts","toLowerCase","includes","getPagesCount","totalCount","Math","ceil","App","setPosts","modal","setModal","setPage","sortedAndSearchPosts","totalPages","setTotalPages","callback","isLoading","setIstLoading","error","setError","fetching","message","useFetching","getAll","data","headers","fetchPosts","isPostLoading","postError","pagesArray","result","i","getPagesArray","useEffect","marginTop","margin","display","justifyContent","p","changePage","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.795f5f6b.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"myModal\":\"MyModal_myModal__3Z8gE\",\"myModalContent\":\"MyModal_myModalContent__w8Phq\",\"active\":\"MyModal_active__3uRuX\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"myInput\":\"Myinput_myInput__3xXTa\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"myBtn\":\"Mybutton_myBtn__J1IeD\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"loader\":\"Loader_loader__2B-uc\",\"rotate\":\"Loader_rotate__2nrIp\"};","import axios from \"axios\";\r\nexport default class PostService {\r\n    static async getAll(limit = 10, page = 1) {\r\n            const response = await axios.get('https://jsonplaceholder.typicode.com/posts', {\r\n                params: {\r\n                    _limit:limit,\r\n                    _page:page\r\n                }\r\n            });\r\n            return response;\r\n    }\r\n}","import React from 'react'\r\nimport classes from './Myinput.module.css'\r\n\r\nexport default function Myinput(props) {\r\n    return (\r\n        <input className={classes.myInput} {...props}/>\r\n    );\r\n};\r\n","import React from 'react'\r\n\r\nexport default function MySelect({options, defaultValue,value, onChange}) {\r\n    return (\r\n            <select \r\n                value={value}\r\n                onChange={evt => onChange(evt.target.value)}\r\n            >\r\n                <option disabled value=\"\">{defaultValue}</option>\r\n                {options.map(option =>\r\n                       <option key={option.value} value={option.value}>\r\n                           {option.name}\r\n                        </option> \r\n                    )}\r\n            </select>\r\n    )\r\n}\r\n","import React from 'react'\r\nimport Myinput from \"../components/UI/input/Myinput\";\r\nimport MySelect from \"../components/UI/select/MySelect\";\r\nexport default function PostFilter({filter, setFilter}) {\r\n    return (\r\n        <div>\r\n        <Myinput\r\n          value={filter.query}\r\n          onChange={e => setFilter({...filter, query: e.target.value})} \r\n          placeholder=\"Поиск...\"\r\n        />\r\n        <MySelect\r\n          value = {filter.sort}\r\n          onChange = {selectedSort => setFilter({...filter,sort:selectedSort})} \r\n          defaultValue=\"Сортировка\"\r\n          options={[\r\n            {value:'title', name: 'По названию'},\r\n            {value:'body', name: 'По описанию'},\r\n          ]}\r\n        />\r\n      </div>\r\n    )\r\n}\r\n","import React from 'react'\r\nimport classes from './Mybutton.module.css'\r\nexport default function Mybutton({children, style, onClick, ...props}) {\r\n    return (\r\n        <button style={style} onClick={onClick} className={classes.myBtn}>\r\n            {children}\r\n        </button>\r\n    )\r\n}\r\n","import React,{useState} from 'react'\r\nimport Mybutton from \"../components/UI/button/Mybutton\";\r\nimport Myinput from \"../components/UI/input/Myinput\";\r\n\r\nexport default function Postform({create}) {\r\n    const [post,setPost] = useState({title:'', body:''});\r\n  \r\n    const addNewPost = (evt) => {\r\n        evt.preventDefault();\r\n        const newPost ={\r\n            ...post,id:Date.now(),\r\n        }\r\n        create(newPost);\r\n        setPost({id:'',tittle:'', body:''});\r\n    }\r\n\r\n    return (\r\n        <form onSubmit={addNewPost}>\r\n        <Myinput \r\n          value={post.title||''}\r\n          onChange = {evt=>setPost({...post, title:evt.target.value})}\r\n          type=\"text\"  \r\n          placeholder=\"название поста\"\r\n        />\r\n        <Myinput\r\n          value={post.body||''}\r\n          onChange = {evt=>setPost({ ...post, body:evt.target.value})} \r\n          type=\"text\" \r\n          placeholder=\"описание поста\"\r\n        />\r\n        <Mybutton>создать пост</Mybutton>\r\n      </form> \r\n    )\r\n}\r\n","import React from 'react'\r\nimport Mybutton from './UI/button/Mybutton'\r\n\r\nexport default function Postitem(props) {\r\n  \r\n    return (\r\n        <div className=\"post\">\r\n        <div className=\"post_content\">\r\n          <strong>{props.post.id} {props.post.title}</strong>\r\n            <div> \r\n              {props.post.body}\r\n            </div>\r\n        </div>\r\n        <div className=\"post_btns\">\r\n          <Mybutton onClick={() => props.remove(props.post)}>\r\n            удалить\r\n          </Mybutton>\r\n        </div>\r\n      </div>\r\n    )\r\n}\r\n","import React from 'react'\r\nimport { TransitionGroup,CSSTransition } from 'react-transition-group'\r\nimport Postitem from './Postitem'\r\n\r\n\r\nexport default function Postlist({posts, title, remove}) {\r\n    if(!posts.length){\r\n        return (\r\n            <h1 style={{textAlign:\"center\"}}>Посты не найдены!</h1>\r\n        )\r\n    }\r\n    return (\r\n        <div>\r\n            <h1 style={{textAlign:'center'}}>{title}</h1>\r\n            <TransitionGroup>\r\n                {posts.map((post,index) =>\r\n                    <CSSTransition\r\n                        key={post.id}\r\n                        timeout={500}\r\n                        classNames=\"post\"\r\n                    >                    \r\n                        <Postitem remove={remove} number={index + 1} post={post}/>\r\n                    </CSSTransition>\r\n                )}\r\n            </TransitionGroup>\r\n        </div>\r\n    )\r\n}\r\n","import React from 'react'\r\nimport cl from './Loader.module.css';\r\nexport default function Loader() {\r\n    return (\r\n        <div className={cl.loader}>\r\n            \r\n        </div>\r\n    )\r\n}\r\n","import React from 'react';\r\nimport cl from './MyModal.module.css';\r\nexport default function MyModal({children, visible, setVisible}) {\r\n    \r\n    const rootClasses = [cl.myModal];\r\n\r\n    if(visible){\r\n        rootClasses.push(cl.active);\r\n    }\r\n    return (\r\n        <div className={rootClasses.join(' ')} onClick={() => setVisible(false)}>\r\n            <div className={cl.myModalContent} onClick={e=> e.stopPropagation()}>\r\n                {children}\r\n             </div>\r\n        </div>\r\n    )\r\n}\r\n","import {useState} from \"react\";\r\n\r\nexport const useFetching = (callback) => {\r\n    const [isLoading,setIstLoading] = useState(false);\r\n    const [error,setError] = useState('');\r\n\r\n    const fetching = async () => {\r\n        try {\r\n            setIstLoading(true);\r\n            await callback();\r\n        }catch (e){\r\n            setError(e.message);\r\n        } finally {\r\n            setIstLoading(false);\r\n        }\r\n    }\r\n\r\n    return [fetching, isLoading, error];\r\n}","import {useMemo} from \"react\";\r\n\r\nexport const useSortedPosts = (posts, sort)  => {\r\n    const sortedPosts = useMemo( () => {\r\n        console.log('Ф/Я getSortedPosts')\r\n        if(sort){\r\n          return [...posts].sort((a,b) => a[sort].localeCompare(b[sort]));\r\n        }\r\n        return posts;\r\n      },[sort, posts])\r\n\r\n      return sortedPosts;\r\n}\r\n\r\n\r\nexport const usePosts = (posts, sort, query)  => {\r\n    const sortedPosts = useSortedPosts(posts,sort)\r\n    const sortedAndSearchPosts = useMemo(() => {\r\n        return sortedPosts.filter(post => post.title.toLowerCase().includes(query))\r\n      },[query, sortedPosts])\r\n    return sortedAndSearchPosts;\r\n}","export const getPagesCount = (totalCount, limit) => {\r\n    return Math.ceil(totalCount / limit)\r\n}\r\n\r\nexport const getPagesArray = (totalPages) => {\r\n    let result = []\r\n    for (let i = 0; i< totalPages; i++){\r\n        result.push(i+1);\r\n    }\r\n    return result;\r\n}","import React,{useState,useEffect} from \"react\";\nimport '../src/styles/App.css';\nimport PostService from \"./API/PostService\";\nimport PostFilter from \"./components/PostFilter\";\nimport Postform from \"./components/Postform\";\nimport Postlist from \"./components/Postlist\";\nimport Mybutton from \"./components/UI/button/Mybutton\";\nimport Loader from \"./components/UI/Loader/Loader\";\nimport MyModal from \"./components/UI/MyModal/MyModal\";\nimport { useFetching } from \"./hooks/useFetching\";\nimport { usePosts } from \"./hooks/usePosts\";\nimport { getPagesArray, getPagesCount } from \"./utils/pages\";\n\n\n\nfunction App() {\n  const [posts,setPosts]= useState([]);\n  const [filter,setFilter] = useState({sort:'', query:''})\n  const [modal,setModal] = useState(false);\n  const [limit,setLimit] = useState(10);\n  const [page,setPage] = useState(1);\n  const sortedAndSearchPosts = usePosts(posts,filter.sort,filter.query);\n  const [totalPages,setTotalPages] = useState(0);\n\n  const [fetchPosts, isPostLoading,postError] = useFetching(async () => { \n    const response = await PostService.getAll(limit, page);\n    setPosts(response.data)\n    const totalCount = response.headers['x-total-count'];\n    setTotalPages(getPagesCount(totalCount,limit));\n  });\n\n  let pagesArray = getPagesArray(totalPages)\n\n\n  useEffect(() => {\n    fetchPosts();\n  }, [page])\n\nconst createPost = (newPost) => {\n  setPosts([...posts,newPost]);\n  setModal(false);\n}\n\nconst removePost = (post) => {\n  console.log(post);\n  setPosts(posts.filter(p => p.id !== post.id));\n}\n\nconst changePage = (page) => {\n  setPage(page)\n}\n  return (\n    <div className=\"App\">\n      <Mybutton style={{marginTop:30}} onClick={() => setModal(true)}>\n        Создать пользователья\n      </Mybutton>\n      <MyModal visible={modal} setVisible={setModal}>\n        <Postform create={createPost}/>\n      </MyModal>\n      <hr style={{margin:\"15px 0\"}}/>\n      <PostFilter \n        filter={filter} \n        setFilter={setFilter}\n      />\n      {\n      postError && \n        <h1>Произошла ошибка ${postError}</h1>\n      }\n      {\n        isPostLoading\n          ? <div style={{display:'flex',justifyContent:'center',marginTop:50}}><Loader /></div> \n          : <Postlist remove={removePost} posts={sortedAndSearchPosts} title=\"Посты про Js\"/>\n      }\n      <div className=\"page__wrapper\">\n        {pagesArray.map(p => \n          <span\n            onClick={() => changePage(p)} \n            key={p}  \n            className={page === p ? 'page page__current':'page'}\n          >\n            {p}\n          </span>\n        )}\n      </div>\n    </div>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(\n    <App />,\n  document.getElementById('root')\n);\n\n"],"sourceRoot":""}